# âœ… 1ï¸âƒ£ Usa la imagen oficial de Go como base
FROM golang:1.23 AS builder

# âœ… 2ï¸âƒ£ Configurar el directorio de trabajo
WORKDIR /app

# âœ… 3ï¸âƒ£ Copiar los archivos del proyecto
COPY go.mod go.sum ./
RUN go mod tidy

# âœ… 4ï¸âƒ£ Copiar el cÃ³digo fuente
COPY . .

# âœ… 5ï¸âƒ£ Compilar el binario
RUN go build -o student-schedule main.go

# âœ… 6ï¸âƒ£ Crear una imagen final mÃ¡s liviana
FROM ubuntu:latest

# âœ… 7ï¸âƒ£ Instalar dependencias necesarias
RUN apt-get update && apt-get install -y ca-certificates && rm -rf /var/lib/apt/lists/*

# âœ… 8ï¸âƒ£ Configurar el directorio de trabajo
WORKDIR /root/

# âœ… 9ï¸âƒ£ Copiar el binario desde la etapa anterior
COPY --from=builder /app/student-schedule .

# âœ… ğŸ”¥ Exponer el puerto del servicio
EXPOSE 8080

# âœ… 1ï¸âƒ£0ï¸âƒ£ Ejecutar la aplicaciÃ³n
CMD ["./student-schedule"]
